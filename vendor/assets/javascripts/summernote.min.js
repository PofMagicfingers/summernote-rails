(function(e){if(typeof define==="function"&&define.amd){define(["jquery","codemirror"],e)}else{e(window.jQuery,window.CodeMirror)}})(function(e,t){if("function"!==typeof Array.prototype.reduce){Array.prototype.reduce=function(e,t){var n,r,i=this.length>>>0,s=false;if(1<arguments.length){r=t;s=true}for(n=0;i>n;++n){if(this.hasOwnProperty(n)){if(s){r=e(r,this[n],n,this)}else{r=this[n];s=true}}}if(!s){throw new TypeError("Reduce of empty array with no initial value")}return r}}var n={bMac:navigator.appVersion.indexOf("Mac")>-1,bMSIE:navigator.userAgent.indexOf("MSIE")>-1,bFF:navigator.userAgent.indexOf("Firefox")>-1,bCodeMirror:!!t};var r=function(){var e=function(e){return function(t){return e===t}};var t=function(e,t){return e===t};var n=function(){return false};var r=function(e){return function(){return!e.apply(e,arguments)}};var i=function(e){return e};return{eq:e,eq2:t,fail:n,not:r,self:i}}();var i=function(){var e=function(e){return e[0]};var t=function(e){return e[e.length-1]};var n=function(e){return e.slice(0,e.length-1)};var i=function(e){return e.slice(1)};var s=function(e,t){t=t||r.self;return e.reduce(function(e,n){return e+t(n)},0)};var o=function(e){var t=[],n=-1,r=e.length;while(++n<r){t[n]=e[n]}return t};var u=function(n,r){if(n.length===0){return[]}var s=i(n);return s.reduce(function(e,n){var i=t(e);if(r(t(i),n)){i[i.length]=n}else{e[e.length]=[n]}return e},[[e(n)]])};var a=function(e){var t=[];for(var n=0,r=e.length;n<r;n++){if(e[n]){t.push(e[n])}}return t};return{head:e,last:t,initial:n,tail:i,sum:s,from:o,compact:a,clusterBy:u}}();var s=function(){var t=function(e){return function(t){return t&&t.nodeName===e}};var n=function(e){return e&&/^DIV|^P|^LI|^H[1-7]/.test(e.nodeName)};var o="<p><br/></p>";var u=function(e){return e&&/^UL|^OL/.test(e.nodeName)};var a=function(t){return t&&e(t).hasClass("note-editable")};var f=function(t){return t&&e(t).hasClass("note-control-sizing")};var l=function(e,t){while(e){if(t(e)){return e}e=e.parentNode}return null};var c=function(e,t){t=t||r.fail;var n=[];l(e,function(e){n.push(e);return t(e)});return n};var h=function(t,n){var r=c(t);for(var i=n;i;i=i.parentNode){if(e.inArray(i,r)>-1){return i}}return null};var p=function(e,t){var n=[];var r=false,i=false;var s=function(o){if(!o){return}if(o===e){r=true}if(r&&!i){n.push(o)}if(o===t){i=true;return}for(var u=0,a=o.childNodes.length;u<a;u++){s(o.childNodes[u])}};s(h(e,t));return n};var d=function(e,t){t=t||r.fail;var n=[];while(e){n.push(e);if(t(e)){break}e=e.previousSibling}return n};var v=function(e,t){t=t||r.fail;var n=[];while(e){n.push(e);if(t(e)){break}e=e.nextSibling}return n};var m=function(e,t){var n=t.nextSibling,r=t.parentNode;if(n){r.insertBefore(e,n)}else{r.appendChild(e)}return e};var g=function(t,n){e.each(n,function(e,n){t.appendChild(n)});return t};var y=t("#text");var b=function(e){if(y(e)){return e.nodeValue.length}return e.childNodes.length};var w=function(e){var t=0;while(e=e.previousSibling){t+=1}return t};var E=function(t,n){var s=i.initial(c(n,r.eq(t)));return e.map(s,w).reverse()};var S=function(e,t){var n=e;for(var r=0,i=t.length;r<i;r++){n=n.childNodes[t[r]]}return n};var x=function(e,t){if(t===0){return e}if(t>=b(e)){return e.nextSibling}if(y(e)){return e.splitText(t)}var n=e.childNodes[t];e=m(e.cloneNode(false),e);return g(e,v(n))};var T=function(e,t,n){var i=c(t,r.eq(e));if(i.length===1){return x(t,n)}return i.reduce(function(e,r){var i=r.cloneNode(false);m(i,r);if(e===t){e=x(e,n)}g(i,v(e));return i})};var N=function(e,t){if(!e||!e.parentNode){return}if(e.removeNode){return e.removeNode(t)}var n=e.parentNode;if(!t){var r=[];var i,s;for(i=0,s=e.childNodes.length;i<s;i++){r.push(e.childNodes[i])}for(i=0,s=r.length;i<s;i++){n.insertBefore(r[i],e)}}n.removeChild(e)};var C=function(e){return s.isTextarea(e[0])?e.val():e.html()};return{emptyPara:o,isText:y,isPara:n,isList:u,isEditable:a,isControlSizing:f,isAnchor:t("A"),isDiv:t("DIV"),isSpan:t("SPAN"),isB:t("B"),isU:t("U"),isS:t("S"),isI:t("I"),isImg:t("IMG"),isTextarea:t("TEXTAREA"),ancestor:l,listAncestor:c,listNext:v,listPrev:d,commonAncestor:h,listBetween:p,insertAfter:m,position:w,makeOffsetPath:E,fromOffsetPath:S,split:T,remove:N,html:C}}();var o=function(){var t=!!document.createRange;var n=function(e,t){var n=e.parentElement(),r;var o=document.body.createTextRange(),u;var a=i.from(n.childNodes);for(r=0;r<a.length;r++){if(s.isText(a[r])){continue}o.moveToElementText(a[r]);if(o.compareEndPoints("StartToStart",e)>=0){break}u=a[r]}if(r!==0&&s.isText(a[r-1])){var f=document.body.createTextRange(),l=null;f.moveToElementText(u||n);f.collapse(!u);l=u?u.nextSibling:n.firstChild;var c=e.duplicate();c.setEndPoint("StartToStart",f);var h=c.text.replace(/[\r\n]/g,"").length;while(h>l.nodeValue.length&&l.nextSibling){h-=l.nodeValue.length;l=l.nextSibling}var p=l.nodeValue;if(t&&l.nextSibling&&s.isText(l.nextSibling)&&h===l.nodeValue.length){h-=l.nodeValue.length;l=l.nextSibling}n=l;r=h}return{cont:n,offset:r}};var o=function(e){var t=function(e,n){var o,u;if(s.isText(e)){var a=s.listPrev(e,r.not(s.isText));var f=i.last(a).previousSibling;o=f||e.parentNode;n+=i.sum(i.tail(a),s.length);u=!f}else{o=e.childNodes[n]||e;if(s.isText(o)){return t(o,n)}n=0;u=false}return{cont:o,collapseToStart:u,offset:n}};var n=document.body.createTextRange();var o=t(e.cont,e.offset);n.moveToElementText(o.cont);n.collapse(o.collapseToStart);n.moveStart("character",o.offset);return n};var u=function(n,u,a,f){this.sc=n;this.so=u;this.ec=a;this.eo=f;var l=function(){if(t){var e=document.createRange();e.setStart(n,u);e.setEnd(a,f);return e}else{var r=o({cont:n,offset:u});r.setEndPoint("EndToEnd",o({cont:a,offset:f}));return r}};this.select=function(){var e=l();if(t){var n=document.getSelection();if(n.rangeCount>0){n.removeAllRanges()}n.addRange(e)}else{e.select()}};this.listPara=function(){var t=s.listBetween(n,a);var o=i.compact(e.map(t,function(e){return s.ancestor(e,s.isPara)}));return e.map(i.clusterBy(o,r.eq2),i.head)};var c=function(e){return function(){var t=s.ancestor(n,e);return t&&t===s.ancestor(a,e)}};this.isOnEditable=c(s.isEditable);this.isOnList=c(s.isList);this.isOnAnchor=c(s.isAnchor);this.isCollapsed=function(){return n===a&&u===f};this.insertNode=function(e){var n=l();if(t){n.insertNode(e)}else{n.pasteHTML(e.outerHTML)}};this.toString=function(){var e=l();return t?e.toString():e.text};this.bookmark=function(e){return{s:{path:s.makeOffsetPath(e,n),offset:u},e:{path:s.makeOffsetPath(e,a),offset:f}}}};return{create:function(e,r,i,s){if(arguments.length===0){if(t){var o=document.getSelection();if(o.rangeCount===0){return null}var a=o.getRangeAt(0);e=a.startContainer;r=a.startOffset;i=a.endContainer;s=a.endOffset}else{var f=document.selection.createRange();var l=f.duplicate();l.collapse(false);var c=f;c.collapse(true);var h=n(c,true),p=n(l,false);e=h.cont;r=h.offset;i=p.cont;s=p.offset}}else if(arguments.length===2){i=e;s=r}return new u(e,r,i,s)},createFromBookmark:function(e,t){var n=s.fromOffsetPath(e,t.s.path);var r=t.s.offset;var i=s.fromOffsetPath(e,t.e.path);var o=t.e.offset;return new u(n,r,i,o)}}}();var u=function(){var t=function(t){return e.Deferred(function(e){var n=new FileReader;n.onload=function(t){e.resolve(t.target.result)};n.onerror=function(){e.reject(this)};n.readAsDataURL(t)}).promise()};var n=function(t){return e.Deferred(function(e){function r(){s();e.resolve(n)}function i(){s();e.reject(n)}function s(){n.onload=null;n.onerror=null;n.onabort=null}var n=new Image;n.onload=r;n.onerror=i;n.onabort=i;n.src=t}).promise()};return{readFile:t,loadImage:n}}();var a=function(){this.stylePara=function(t,n){var r=t.listPara();e.each(r,function(t,r){e.each(n,function(e,t){r.style[e]=t})})};this.current=function(t,n){var r=e(s.isText(t.sc)?t.sc.parentNode:t.sc);var i=r.css(["font-size","text-align","list-style-type","line-height"])||{};i["font-size"]=parseInt(i["font-size"]);i["font-bold"]=document.queryCommandState("bold")?"bold":"normal";i["font-italic"]=document.queryCommandState("italic")?"italic":"normal";i["font-underline"]=document.queryCommandState("underline")?"underline":"normal";if(!t.isOnList()){i["list-style"]="none"}else{var o=["circle","disc","disc-leading-zero","square"];var u=e.inArray(i["list-style-type"],o)>-1;i["list-style"]=u?"unordered":"ordered"}var a=s.ancestor(t.sc,s.isPara);if(a&&a.style["line-height"]){i["line-height"]=a.style.lineHeight}else{var f=parseInt(i["line-height"])/parseInt(i["font-size"]);i["line-height"]=f.toFixed(1)}i.image=s.isImg(n)&&n;i.anchor=t.isOnAnchor()&&s.ancestor(t.sc,s.isAnchor);i.aAncestor=s.listAncestor(t.sc,s.isEditable);return i}};var f=function(){var e=[],t=[];var n=function(e){var t=e[0],n=o.create();return{contents:e.html(),bookmark:n.bookmark(t),scrollTop:e.scrollTop()}};var r=function(e,t){e.html(t.contents).scrollTop(t.scrollTop);o.createFromBookmark(e[0],t.bookmark).select()};this.undo=function(i){var s=n(i);if(e.length===0){return}r(i,e.pop());t.push(s)};this.redo=function(i){var s=n(i);if(t.length===0){return}r(i,t.pop());e.push(s)};this.recordUndo=function(r){t=[];e.push(n(r))}};var l=function(){this.saveRange=function(e){e.data("range",o.create())};this.restoreRange=function(e){var t=e.data("range");if(t){t.select()}};var t=new a;this.currentStyle=function(e){var n=o.create();return n.isOnEditable()&&t.current(n,e)};this.tab=function(t){r(t);var n=o.create();var i=(new Array(t.data("tabsize")+1)).join("&nbsp;");n.insertNode(e('<span id="noteTab">'+i+"</span>")[0]);var u=e("#noteTab").removeAttr("id");n=o.create(u[0],1);n.select();s.remove(u[0])};this.undo=function(e){e.data("NoteHistory").undo(e)};this.redo=function(e){e.data("NoteHistory").redo(e)};var r=this.recordUndo=function(e){e.data("NoteHistory").recordUndo(e)};var i=["bold","italic","underline","strikethrough","justifyLeft","justifyCenter","justifyRight","justifyFull","insertOrderedList","insertUnorderedList","indent","outdent","formatBlock","removeFormat","backColor","foreColor","insertHorizontalRule"];for(var f=0,l=i.length;f<l;f++){this[i[f]]=function(e){return function(t,n){r(t);document.execCommand(e,false,n)}}(i[f])}this.insertImage=function(t,n){u.loadImage(n).done(function(i){r(t);var s=e("<img>").attr("src",n);s.css("width",Math.min(t.width(),i.width));o.create().insertNode(s[0])}).fail(function(){var e=t.data("callbacks");if(e.onImageUploadError){e.onImageUploadError()}})};this.insertVideo=function(t,n){var r=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/;var i=n.match(r);var s=/\/\/instagram.com\/p\/(.[a-zA-Z0-9]*)/;var u=n.match(s);var a=/\/\/vine.co\/v\/(.[a-zA-Z0-9]*)/;var f=n.match(a);var l=/\/\/(player.)?vimeo.com\/([a-z]*\/)*([0-9]{6,11})[?]?.*/;var c=n.match(l);var h=/.+dailymotion.com\/(video|hub)\/([^_]+)[^#]*(#video=([^_&]+))?/;var p=n.match(h);var d;if(i&&i[2].length===11){var v=i[2];d=e("<iframe>").attr("src","http://www.youtube.com/embed/"+v).attr("width","640").attr("height","360")}else if(u&&u[0].length>0){d=e("<iframe>").attr("src",u[0]+"/embed/").attr("width","612").attr("height","710").attr("scrolling","no").attr("allowtransparency","true")}else if(f&&f[0].length>0){d=e("<iframe>").attr("src",f[0]+"/embed/simple").attr("width","600").attr("height","600").attr("class","vine-embed")}else if(c&&c[3].length>0){d=e("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("src","//player.vimeo.com/video/"+c[3]).attr("width","640").attr("height","360")}else if(p&&p[2].length>0){d=e("<iframe>").attr("src","http://www.dailymotion.com/embed/video/"+p[2]).attr("width","640").attr("height","360")}else{}if(d){d.attr("frameborder",0);o.create().insertNode(d[0])}};this.formatBlock=function(e,t){r(e);t=n.bMSIE?"<"+t+">":t;document.execCommand("FormatBlock",false,t)};this.fontSize=function(e,t){r(e);document.execCommand("fontSize",false,3);if(n.bFF){e.find("font[size=3]").removeAttr("size").css("font-size",t+"px")}else{e.find("span").filter(function(){return this.style.fontSize==="medium"}).css("font-size",t+"px")}};this.lineHeight=function(e,n){r(e);t.stylePara(o.create(),{lineHeight:n})};this.unlink=function(e){var t=o.create();if(t.isOnAnchor()){r(e);var n=s.ancestor(t.sc,s.isAnchor);t=o.create(n,0,n,1);t.select();document.execCommand("unlink")}};this.setLinkDialog=function(t,i){var u=o.create();if(u.isOnAnchor()){var a=s.ancestor(u.sc,s.isAnchor);u=o.create(a,0,a,1)}i({range:u,text:u.toString(),url:u.isOnAnchor()?s.ancestor(u.sc,s.isAnchor).href:""},function(i){u.select();r(t);var s;if(i.indexOf("@")!==-1){s=i.indexOf(":")!==-1?i:"mailto:"+i}else{s=i.indexOf("://")!==-1?i:"http://"+i}if(n.bMSIE&&u.isCollapsed()){u.insertNode(e('<A id="linkAnchor">'+i+"</A>")[0]);var a=e("#linkAnchor").removeAttr("id").attr("href",s);u=o.create(a[0],0,a[0],1);u.select()}else{document.execCommand("createlink",false,s)}})};this.setVideoDialog=function(e,t){var n=o.create();var i=this;if(n.isOnAnchor()){var u=s.ancestor(n.sc,s.isAnchor);n=o.create(u,0,u,1)}t({range:n,text:n.toString()},function(t){n.select();r(e);i.insertVideo(e,t)})};this.color=function(e,t){var n=JSON.parse(t);var i=n.foreColor,s=n.backColor;r(e);if(i){document.execCommand("foreColor",false,i)}if(s){document.execCommand("backColor",false,s)}};this.insertTable=function(t,i){r(t);var s=i.split("x");var u=s[0],a=s[1];var f=[],l;var c=n.bMSIE?"&nbsp;":"<br/>";for(var h=0;h<u;h++){f.push("<td>"+c+"</td>")}l=f.join("");var p=[],d;for(var v=0;v<a;v++){p.push("<tr>"+l+"</tr>")}d=p.join("");var m='<table class="table table-bordered">'+d+"</table>";o.create().insertNode(e(m)[0])};this.floatMe=function(e,t,n){r(e);n.style.cssFloat=t};this.resize=function(e,t,n){r(e);n.style.width=e.width()*t+"px";n.style.height=""};this.resizeTo=function(e,t){var n=e.y/e.x;var r=t.data("ratio");t.css({width:r>n?e.x:e.y/r,height:r>n?e.x*r:e.y})}};var c=function(){this.update=function(t,n){var r=function(t,n){t.find(".dropdown-menu li a").each(function(){var t=parseFloat(e(this).data("value"))===n;this.className=t?"checked":""})};var i=t.find(".note-fontsize");i.find(".note-current-fontsize").html(n["font-size"]);r(i,parseFloat(n["font-size"]));var s=t.find(".note-height");r(s,parseFloat(n["line-height"]));var o=function(e,n){var r=t.find(e);r[n()?"addClass":"removeClass"]("active")};o('button[data-event="bold"]',function(){return n["font-bold"]==="bold"});o('button[data-event="italic"]',function(){return n["font-italic"]==="italic"});o('button[data-event="underline"]',function(){return n["font-underline"]==="underline"});o('button[data-event="justifyLeft"]',function(){return n["text-align"]==="left"||n["text-align"]==="start"});o('button[data-event="justifyCenter"]',function(){return n["text-align"]==="center"});o('button[data-event="justifyRight"]',function(){return n["text-align"]==="right"});o('button[data-event="justifyFull"]',function(){return n["text-align"]==="justify"});o('button[data-event="insertUnorderedList"]',function(){return n["list-style"]==="unordered"});o('button[data-event="insertOrderedList"]',function(){return n["list-style"]==="ordered"})};this.updateRecentColor=function(t,n,r){var i=e(t).closest(".note-color");var s=i.find(".note-recent-color");var o=JSON.parse(s.attr("data-value"));o[n]=r;s.attr("data-value",JSON.stringify(o));var u=n==="backColor"?"background-color":"color";s.find("i").css(u,r)};this.updateFullscreen=function(e,t){var n=e.find('button[data-event="fullscreen"]');n[t?"addClass":"removeClass"]("active")};this.updateCodeview=function(e,t){var n=e.find('button[data-event="codeview"]');n[t?"addClass":"removeClass"]("active")};this.enable=function(e){e.find("button").not('button[data-event="codeview"]').removeClass("disabled")};this.disable=function(e){e.find("button").not('button[data-event="codeview"]').addClass("disabled")}};var h=function(){var t=function(t,n){var r=e(n);var i=r.position(),s=r.height();t.css({display:"block",left:i.left,top:i.top+s})};this.update=function(e,n){var r=e.find(".note-link-popover"),i=e.find(".note-image-popover");if(n.anchor){var s=r.find("a");s.attr("href",n.anchor.href).html(n.anchor.href);t(r,n.anchor)}else{r.hide()}if(n.image){t(i,n.image)}else{i.hide()}};this.hide=function(e){e.children().hide()}};var p=function(){this.update=function(t,n){var r=t.find(".note-control-selection");if(n.image){var i=e(n.image);var s=i.position();var o={w:i.width(),h:i.height()};r.css({display:"block",left:s.left,top:s.top,width:o.w,height:o.h}).data("target",n.image);var u=o.w+"x"+o.h;r.find(".note-control-selection-info").text(u)}else{r.hide()}};this.hide=function(e){e.children().hide()}};var d=function(){var e=function(e,t){if(t){e.removeClass("disabled").attr("disabled",false)}else{e.addClass("disabled").attr("disabled",true)}};this.showImageDialog=function(t,n,r){var i=t.find(".note-image-dialog");var s=t.find(".note-image-input"),o=t.find(".note-image-url"),u=t.find(".note-image-btn");i.on("shown.bs.modal",function(){toggleImageBtn=function(){e(u,s.files.length+o.val().length>0)};o.val("").keyup(toggleImageBtn).trigger("focus");s.val("").change(toggleImageBtn);u.click(function(e){i.modal("hide");if(imageInput.files.length>0){n(s.files);s.val("")}else{r(o.val())}e.preventDefault()})}).on("hidden.bs.modal",function(){s.off("change");i.off("shown.bs.modal hidden.bs.modal");o.off("keyup");u.off("click")}).modal("show")};this.showVideoDialog=function(t,n,r){var i=t.find(".note-video-dialog");var s=i.find(".note-video-url"),o=i.find(".note-video-btn");i.on("shown.bs.modal",function(){s.val(n.text).keyup(function(){e(o,s.val())}).trigger("keyup").trigger("focus");o.click(function(e){i.modal("hide");r(s.val());e.preventDefault()})}).on("hidden.bs.modal",function(){s.off("keyup");o.off("click");i.off("show.bs.modal hidden.bs.modal")}).modal("show")};this.showLinkDialog=function(t,n,r){var i=t.find(".note-link-dialog");var s=i.find(".note-link-text"),o=i.find(".note-link-url"),u=i.find(".note-link-btn");i.on("shown.bs.modal",function(){s.html(n.text);o.val(n.url).keyup(function(){e(u,o.val());if(!n.text){s.html(o.val())}}).trigger("focus");u.click(function(e){i.modal("hide");r(o.val());e.preventDefault()})}).on("hidden.bs.modal",function(){o.off("keyup");u.off("click");i.off("shown.bs.modal hidden.bs.modal")}).modal("show")};this.showHelpDialog=function(e){e.find(".note-help-dialog").modal("show")}};var v=function(){var r=new l;var i=new c,o=new h;var a=new p,f=new d;var v={BACKSPACE:8,TAB:9,ENTER:13,SPACE:32,NUM0:48,NUM1:49,NUM6:54,NUM7:55,NUM8:56,B:66,E:69,I:73,J:74,K:75,L:76,R:82,S:83,U:85,Y:89,Z:90,SLASH:191,LEFTBRACKET:219,BACKSLACH:220,RIGHTBRACKET:221};var m=function(t){var n=e(t).closest(".note-editor");return{editor:function(){return n},toolbar:function(){return n.find(".note-toolbar")},editable:function(){return n.find(".note-editable")},codable:function(){return n.find(".note-codable")},statusbar:function(){return n.find(".note-statusbar")},popover:function(){return n.find(".note-popover")},handle:function(){return n.find(".note-handle")},dialog:function(){return n.find(".note-dialog")}}};var g=function(e){var t=n.bMac?e.metaKey:e.ctrlKey,i=e.shiftKey,s=e.keyCode;var o=t||i||s===v.TAB;var u=o?m(e.target):null;if(s===v.TAB&&u.editable().data("tabsize")){r.tab(u.editable())}else if(t&&(i&&s===v.Z||s===v.Y)){r.redo(u.editable())}else if(t&&s===v.Z){r.undo(u.editable())}else if(t&&s===v.B){r.bold(u.editable())}else if(t&&s===v.I){r.italic(u.editable())}else if(t&&s===v.U){r.underline(u.editable())}else if(t&&i&&s===v.S){r.strikethrough(u.editable())}else if(t&&s===v.BACKSLACH){r.removeFormat(u.editable())}else if(t&&s===v.K){u.editable();r.setLinkDialog(u.editable(),function(e,t){f.showLinkDialog(u.dialog(),e,t)})}else if(t&&s===v.SLASH){f.showHelpDialog(u.dialog())}else if(t&&i&&s===v.L){r.justifyLeft(u.editable())}else if(t&&i&&s===v.E){r.justifyCenter(u.editable())}else if(t&&i&&s===v.R){r.justifyRight(u.editable())}else if(t&&i&&s===v.J){r.justifyFull(u.editable())}else if(t&&i&&s===v.NUM7){r.insertUnorderedList(u.editable())}else if(t&&i&&s===v.NUM8){r.insertOrderedList(u.editable())}else if(t&&s===v.LEFTBRACKET){r.outdent(u.editable())}else if(t&&s===v.RIGHTBRACKET){r.indent(u.editable())}else if(t&&s===v.NUM0){r.formatBlock(u.editable(),"P")}else if(t&&v.NUM1<=s&&s<=v.NUM6){var a="H"+String.fromCharCode(s);r.formatBlock(u.editable(),a)}else if(t&&s===v.ENTER){r.insertHorizontalRule(u.editable())}else{if(s===v.BACKSPACE||s===v.ENTER||s===v.SPACE){r.recordUndo(m(e.target).editable())}return}e.preventDefault()};var y=function(t,n){var i=t.data("callbacks");r.restoreRange(t);if(i.onImageUpload){i.onImageUpload(n,r,t)}else{e.each(n,function(e,n){u.readFile(n).done(function(e){r.insertImage(t,e)}).fail(function(){if(i.onImageUploadError){i.onImageUploadError()}})})}};var b=function(e){var t=e.originalEvent.dataTransfer;if(t&&t.files){var n=m(e.currentTarget||e.target);n.editable().focus();y(n.editable(),t.files)}e.preventDefault()};var w=function(e){if(s.isImg(e.target)){e.preventDefault()}};var E=function(e){var t=m(e.currentTarget||e.target);var n=r.currentStyle(e.target);if(!n){return}i.update(t.toolbar(),n);o.update(t.popover(),n);a.update(t.handle(),n)};var S=function(e){var t=m(e.currentTarget||e.target);o.hide(t.popover());a.hide(t.handle())};var x=function(t){if(s.isControlSizing(t.target)){var n=m(t.target),i=n.handle(),u=n.popover(),f=n.editable(),l=n.editor();var c=i.find(".note-control-selection").data("target"),h=e(c);var p=h.offset(),d=e(document).scrollTop(),v;l.on("mousemove",function(e){v={x:e.clientX-p.left,y:e.clientY-(p.top-d)};r.resizeTo(v,h);a.update(i,{image:c});o.update(u,{image:c})}).on("mouseup",function(){l.off("mousemove").off("mouseup")});if(!h.data("ratio")){h.data("ratio",h.height()/h.width())}r.recordUndo(f);t.stopPropagation();t.preventDefault()}};var T=function(t){var n=e(t.target).closest("[data-event]");if(n.length>0){t.preventDefault()}};var N=function(o){var u=e(o.target).closest("[data-event]");if(u.length>0){var a=u.attr("data-event"),l=u.attr("data-value");var c=m(o.target);var h=c.editor(),p=c.toolbar(),d=c.dialog(),v=c.editable(),g=c.codable();var b;if(e.inArray(a,["resize","floatMe"])!==-1){var w=c.handle();var S=w.find(".note-control-selection");b=S.data("target")}if(r[a]){v.trigger("focus");r[a](v,l,b)}if(e.inArray(a,["backColor","foreColor"])!==-1){i.updateRecentColor(u[0],a,l)}else if(a==="showLinkDialog"){v.focus();r.setLinkDialog(v,function(e,t){f.showLinkDialog(d,e,t)})}else if(a==="showImageDialog"){v.focus();f.showImageDialog(d,function(e){y(v,e)},function(e){r.restoreRange(v);r.insertImage(v,e)})}else if(a==="showVideoDialog"){v.focus();r.setVideoDialog(v,function(e,t){f.showVideoDialog(d,e,t)})}else if(a==="showHelpDialog"){f.showHelpDialog(d)}else if(a==="fullscreen"){h.toggleClass("fullscreen");var x=function(){var t=e(window).height()-p.outerHeight();v.css("height",t)};var T=h.hasClass("fullscreen");if(T){v.data("orgHeight",v.css("height"));e(window).resize(x).trigger("resize")}else{var N=!!v.data("optionHeight");v.css("height",N?v.data("orgHeight"):"auto");e(window).off("resize")}i.updateFullscreen(p,T)}else if(a==="codeview"){h.toggleClass("codeview");var C=h.hasClass("codeview");if(C){g.val(v.html());g.height(v.height());i.disable(p);g.focus();if(n.bCodeMirror){var k=t.fromTextArea(g[0],e.extend({mode:"text/html",lineNumbers:true},h.data("options").codemirror));k.setSize(null,v.outerHeight());if(k.autoFormatRange){k.autoFormatRange({line:0,ch:0},{line:k.lineCount(),ch:k.getTextArea().value.length})}g.data("cmEditor",k)}}else{if(n.bCodeMirror){g.data("cmEditor").toTextArea()}v.html(g.val()||s.emptyPara);v.height(v.data("optionHeight")?g.height():"auto");i.enable(p);v.focus()}i.updateCodeview(c.toolbar(),C)}E(o)}};var C=24;var k=function(t){var n=e(document);var r=m(t.target);var i=r.editable();var s=i.offset().top-n.scrollTop();var o=function(e){i.height(e.clientY-(s+C))};var u=function(){n.unbind("mousemove",o).unbind("mouseup",u)};n.mousemove(o).mouseup(u);t.stopPropagation();t.preventDefault()};var L=18;var A=function(t){var n=e(t.target.parentNode);var r=n.next();var i=n.find(".note-dimension-picker-mousecatcher");var s=n.find(".note-dimension-picker-highlighted");var o=n.find(".note-dimension-picker-unhighlighted");var u;if(t.offsetX===undefined){var a=e(t.target).offset();u={x:t.pageX-a.left,y:t.pageY-a.top}}else{u={x:t.offsetX,y:t.offsetY}}var f={c:Math.ceil(u.x/L)||1,r:Math.ceil(u.y/L)||1};s.css({width:f.c+"em",height:f.r+"em"});i.attr("data-value",f.c+"x"+f.r);if(3<f.c&&f.c<10){o.css({width:f.c+1+"em"})}if(3<f.r&&f.r<10){o.css({height:f.r+1+"em"})}r.html(f.c+" x "+f.r)};var O=function(t){var n=e(),r=t.dropzone,i=t.dropzone.find(".note-dropzone-message");e(document).on("dragenter",function(e){var s=t.editor.hasClass("codeview");if(!s&&n.length===0){t.editor.addClass("dragover");r.width(t.editor.width());r.height(t.editor.height());i.text("Drag Image Here")}n=n.add(e.target)}).on("dragleave",function(e){n=n.not(e.target);if(n.length===0){t.editor.removeClass("dragover")}}).on("drop",function(){n=e();t.editor.removeClass("dragover")});r.on("dragenter",function(){r.addClass("hover");i.text("Drop Image")}).on("dragleave",function(){r.removeClass("hover");i.text("Drag Image Here")});r.on("drop",function(e){b(e)}).on("dragover",false)};this.attach=function(e,t){e.editable.on("keydown",g);e.editable.on("mousedown",w);e.editable.on("keyup mouseup",E);e.editable.on("scroll",S);O(e);e.handle.on("mousedown",x);e.toolbar.on("click",N);e.popover.on("click",N);e.toolbar.on("mousedown",T);e.popover.on("mousedown",T);e.statusbar.on("mousedown",k);var n=e.toolbar;var i=n.find(".note-dimension-picker-mousecatcher");i.on("mousemove",A);e.editable.on("blur",function(){r.saveRange(e.editable)});if(t.onenter){e.editable.keypress(function(e){if(e.keyCode===v.ENTER){t.onenter(e)}})}if(t.onfocus){e.editable.focus(t.onfocus)}if(t.onblur){e.editable.blur(t.onblur)}if(t.onkeyup){e.editable.keyup(t.onkeyup)}if(t.onkeydown){e.editable.keydown(t.onkeydown)}e.editable.data("callbacks",{onChange:t.onChange,onAutoSave:t.onAutoSave,onPasteBefore:t.onPasteBefore,onPasteAfter:t.onPasteAfter,onImageUpload:t.onImageUpload,onImageUploadError:t.onImageUpload,onFileUpload:t.onFileUpload,onFileUploadError:t.onFileUpload})};this.dettach=function(e){e.editable.off();e.toolbar.off();e.handle.off();e.popover.off()}};var m=function(){var t,r,i,o,u;t={picture:function(e){return'<button type="button" class="btn btn-default btn-sm btn-small" title="'+e.image.image+'" data-event="showImageDialog" tabindex="-1"><i class="fa fa-picture-o icon-picture"></i></button>'},link:function(e){return'<button type="button" class="btn btn-default btn-sm btn-small" title="'+e.link.link+'" data-event="showLinkDialog" data-shortcut="Ctrl+K" data-mac-shortcut="⌘+K" tabindex="-1"><i class="fa fa-link icon-link"></i></button>'},video:function(e){return'<button type="button" class="btn btn-default btn-sm btn-small" title="'+e.video.video+'" data-event="showVideoDialog" tabindex="-1"><i class="fa fa-youtube-play icon-play"></i></button>'},table:function(e){return'<button type="button" class="btn btn-default btn-sm btn-small dropdown-toggle" title="'+e.table.table+'" data-toggle="dropdown" tabindex="-1"><i class="fa fa-table icon-table"></i> <span class="caret"></span></button>'+'<ul class="dropdown-menu">'+'<div class="note-dimension-picker">'+'<div class="note-dimension-picker-mousecatcher" data-event="insertTable" data-value="1x1"></div>'+'<div class="note-dimension-picker-highlighted"></div>'+'<div class="note-dimension-picker-unhighlighted"></div>'+"</div>"+'<div class="note-dimension-display"> 1 x 1 </div>'+"</ul>"},style:function(e){return'<button type="button" class="btn btn-default btn-sm btn-small dropdown-toggle" title="'+e.style.style+'" data-toggle="dropdown" tabindex="-1"><i class="fa fa-magic icon-magic"></i> <span class="caret"></span></button>'+'<ul class="dropdown-menu">'+'<li><a data-event="formatBlock" data-value="p">'+e.style.normal+"</a></li>"+'<li><a data-event="formatBlock" data-value="blockquote"><blockquote>'+e.style.blockquote+"</blockquote></a></li>"+'<li><a data-event="formatBlock" data-value="pre">'+e.style.pre+"</a></li>"+'<li><a data-event="formatBlock" data-value="h1"><h1>'+e.style.h1+"</h1></a></li>"+'<li><a data-event="formatBlock" data-value="h2"><h2>'+e.style.h2+"</h2></a></li>"+'<li><a data-event="formatBlock" data-value="h3"><h3>'+e.style.h3+"</h3></a></li>"+'<li><a data-event="formatBlock" data-value="h4"><h4>'+e.style.h4+"</h4></a></li>"+'<li><a data-event="formatBlock" data-value="h5"><h5>'+e.style.h5+"</h5></a></li>"+'<li><a data-event="formatBlock" data-value="h6"><h6>'+e.style.h6+"</h6></a></li>"+"</ul>"},fontsize:function(e){return'<button type="button" class="btn btn-default btn-sm btn-small dropdown-toggle" data-toggle="dropdown" title="'+e.font.size+'" tabindex="-1"><span class="note-current-fontsize">11</span> <b class="caret"></b></button>'+'<ul class="dropdown-menu">'+'<li><a data-event="fontSize" data-value="8"><i class="fa fa-check icon-ok"></i> 8</a></li>'+'<li><a data-event="fontSize" data-value="9"><i class="fa fa-check icon-ok"></i> 9</a></li>'+'<li><a data-event="fontSize" data-value="10"><i class="fa fa-check icon-ok"></i> 10</a></li>'+'<li><a data-event="fontSize" data-value="11"><i class="fa fa-check icon-ok"></i> 11</a></li>'+'<li><a data-event="fontSize" data-value="12"><i class="fa fa-check icon-ok"></i> 12</a></li>'+'<li><a data-event="fontSize" data-value="14"><i class="fa fa-check icon-ok"></i> 14</a></li>'+'<li><a data-event="fontSize" data-value="18"><i class="fa fa-check icon-ok"></i> 18</a></li>'+'<li><a data-event="fontSize" data-value="24"><i class="fa fa-check icon-ok"></i> 24</a></li>'+'<li><a data-event="fontSize" data-value="36"><i class="fa fa-check icon-ok"></i> 36</a></li>'+"</ul>"},color:function(e){return'<button type="button" class="btn btn-default btn-sm btn-small note-recent-color" title="'+e.color.recent+'" data-event="color" data-value=\'{"backColor":"yellow"}\' tabindex="-1"><i class="fa fa-font icon-font" style="color:black;background-color:yellow;"></i></button>'+'<button type="button" class="btn btn-default btn-sm btn-small dropdown-toggle" title="'+e.color.more+'" data-toggle="dropdown" tabindex="-1">'+'<span class="caret"></span>'+"</button>"+'<ul class="dropdown-menu">'+"<li>"+'<div class="btn-group">'+'<div class="note-palette-title">'+e.color.background+"</div>"+'<div class="note-color-reset" data-event="backColor" data-value="inherit" title="'+e.color.transparent+'">'+e.color.setTransparent+"</div>"+'<div class="note-color-palette" data-target-event="backColor"></div>'+"</div>"+'<div class="btn-group">'+'<div class="note-palette-title">'+e.color.foreground+"</div>"+'<div class="note-color-reset" data-event="foreColor" data-value="inherit" title="'+e.color.reset+'">'+e.color.resetToDefault+"</div>"+'<div class="note-color-palette" data-target-event="foreColor"></div>'+"</div>"+"</li>"+"</ul>"},bold:function(e){return'<button type="button" class="btn btn-default btn-sm btn-small" title="'+e.font.bold+'" data-shortcut="Ctrl+B" data-mac-shortcut="⌘+B" data-event="bold" tabindex="-1"><i class="fa fa-bold icon-bold"></i></button>'},italic:function(e){return'<button type="button" class="btn btn-default btn-sm btn-small" title="'+e.font.italic+'" data-shortcut="Ctrl+I" data-mac-shortcut="⌘+I" data-event="italic" tabindex="-1"><i class="fa fa-italic icon-italic"></i></button>'},underline:function(e){return'<button type="button" class="btn btn-default btn-sm btn-small" title="'+e.font.underline+'" data-shortcut="Ctrl+U" data-mac-shortcut="⌘+U" data-event="underline" tabindex="-1"><i class="fa fa-underline icon-underline"></i></button>'},clear:function(e){return'<button type="button" class="btn btn-default btn-sm btn-small" title="'+e.font.clear+'" data-shortcut="Ctrl+\\" data-mac-shortcut="⌘+\\" data-event="removeFormat" tabindex="-1"><i class="fa fa-eraser icon-eraser"></i></button>'},ul:function(e){return'<button type="button" class="btn btn-default btn-sm btn-small" title="'+e.lists.unordered+'" data-shortcut="Ctrl+Shift+8" data-mac-shortcut="⌘+⇧+7" data-event="insertUnorderedList" tabindex="-1"><i class="fa fa-list-ul icon-list-ul"></i></button>'},ol:function(e){return'<button type="button" class="btn btn-default btn-sm btn-small" title="'+e.lists.ordered+'" data-shortcut="Ctrl+Shift+7" data-mac-shortcut="⌘+⇧+8" data-event="insertOrderedList" tabindex="-1"><i class="fa fa-list-ol icon-list-ol"></i></button>'},paragraph:function(e){return'<button type="button" class="btn btn-default btn-sm btn-small dropdown-toggle" title="'+e.paragraph.paragraph+'" data-toggle="dropdown" tabindex="-1"><i class="fa fa-align-left icon-align-left"></i>  <span class="caret"></span></button>'+'<ul class="dropdown-menu">'+"<li>"+'<div class="note-align btn-group">'+'<button type="button" class="btn btn-default btn-sm btn-small" title="'+e.paragraph.left+'" data-shortcut="Ctrl+Shift+L" data-mac-shortcut="⌘+⇧+L" data-event="justifyLeft" tabindex="-1"><i class="fa fa-align-left icon-align-left"></i></button>'+'<button type="button" class="btn btn-default btn-sm btn-small" title="'+e.paragraph.center+'" data-shortcut="Ctrl+Shift+E" data-mac-shortcut="⌘+⇧+E" data-event="justifyCenter" tabindex="-1"><i class="fa fa-align-center icon-align-center"></i></button>'+'<button type="button" class="btn btn-default btn-sm btn-small" title="'+e.paragraph.right+'" data-shortcut="Ctrl+Shift+R" data-mac-shortcut="⌘+⇧+R" data-event="justifyRight" tabindex="-1"><i class="fa fa-align-right icon-align-right"></i></button>'+'<button type="button" class="btn btn-default btn-sm btn-small" title="'+e.paragraph.justify+'" data-shortcut="Ctrl+Shift+J" data-mac-shortcut="⌘+⇧+J" data-event="justifyFull" tabindex="-1"><i class="fa fa-align-justify icon-align-justify"></i></button>'+"</div>"+"</li>"+"<li>"+'<div class="note-list btn-group">'+'<button type="button" class="btn btn-default btn-sm btn-small" title="'+e.paragraph.outdent+'" data-shortcut="Ctrl+[" data-mac-shortcut="⌘+[" data-event="outdent" tabindex="-1"><i class="fa fa-outdent icon-indent-left"></i></button>'+'<button type="button" class="btn btn-default btn-sm btn-small" title="'+e.paragraph.indent+'" data-shortcut="Ctrl+]" data-mac-shortcut="⌘+]" data-event="indent" tabindex="-1"><i class="fa fa-indent icon-indent-right"></i></button>'+"</li>"+"</ul>"},height:function(e){return'<button type="button" class="btn btn-default btn-sm btn-small dropdown-toggle" data-toggle="dropdown" title="'+e.font.height+'" tabindex="-1"><i class="fa fa-text-height icon-text-height"></i>&nbsp; <b class="caret"></b></button>'+'<ul class="dropdown-menu">'+'<li><a data-event="lineHeight" data-value="1.0"><i class="fa fa-check icon-ok"></i> 1.0</a></li>'+'<li><a data-event="lineHeight" data-value="1.2"><i class="fa fa-check icon-ok"></i> 1.2</a></li>'+'<li><a data-event="lineHeight" data-value="1.4"><i class="fa fa-check icon-ok"></i> 1.4</a></li>'+'<li><a data-event="lineHeight" data-value="1.5"><i class="fa fa-check icon-ok"></i> 1.5</a></li>'+'<li><a data-event="lineHeight" data-value="1.6"><i class="fa fa-check icon-ok"></i> 1.6</a></li>'+'<li><a data-event="lineHeight" data-value="1.8"><i class="fa fa-check icon-ok"></i> 1.8</a></li>'+'<li><a data-event="lineHeight" data-value="2.0"><i class="fa fa-check icon-ok"></i> 2.0</a></li>'+'<li><a data-event="lineHeight" data-value="3.0"><i class="fa fa-check icon-ok"></i> 3.0</a></li>'+"</ul>"},help:function(e){return'<button type="button" class="btn btn-default btn-sm btn-small" title="'+e.options.help+'" data-shortcut="Ctrl+/" data-mac-shortcut="⌘+/" data-event="showHelpDialog" tabindex="-1"><i class="fa fa-question icon-question"></i></button>'},fullscreen:function(e){return'<button type="button" class="btn btn-default btn-sm btn-small" title="'+e.options.fullscreen+'" data-event="fullscreen" tabindex="-1"><i class="fa fa-arrows-alt icon-fullscreen"></i></button>'},codeview:function(e){return'<button type="button" class="btn btn-default btn-sm btn-small" title="'+e.options.codeview+'" data-event="codeview" tabindex="-1"><i class="fa fa-code icon-code"></i></button>'}};r=function(e){return'<div class="note-popover">'+'<div class="note-link-popover popover bottom in" style="display: none;">'+'<div class="arrow"></div>'+'<div class="popover-content note-link-content">'+'<a href="http://www.google.com" target="_blank">www.google.com</a>&nbsp;&nbsp;'+'<div class="note-insert btn-group">'+'<button type="button" class="btn btn-default btn-sm btn-small" title="'+e.link.edit+'" data-event="showLinkDialog" tabindex="-1"><i class="fa fa-edit icon-edit"></i></button>'+'<button type="button" class="btn btn-default btn-sm btn-small" title="'+e.link.unlink+'" data-event="unlink" tabindex="-1"><i class="fa fa-unlink icon-unlink"></i></button>'+'<button type="button" class="btn btn-default btn-sm btn-small" title="'+e.video.videoLink+'" data-event="showVideoDialog" tabindex="-1"><i class="fa fa-youtube-play icon-play"></i></button>'+"</div>"+"</div>"+"</div>"+'<div class="note-image-popover popover bottom in" style="display: none;">'+'<div class="arrow"></div>'+'<div class="popover-content note-image-content">'+'<div class="btn-group">'+'<button type="button" class="btn btn-default btn-sm btn-small" title="'+e.image.resizeFull+'" data-event="resize" data-value="1" tabindex="-1"><span class="note-fontsize-10">100%</span> </button>'+'<button type="button" class="btn btn-default btn-sm btn-small" title="'+e.image.resizeHalf+'" data-event="resize" data-value="0.5" tabindex="-1"><span class="note-fontsize-10">50%</span> </button>'+'<button type="button" class="btn btn-default btn-sm btn-small" title="'+e.image.resizeQuarter+'" data-event="resize" data-value="0.25" tabindex="-1"><span class="note-fontsize-10">25%</span> </button>'+"</div>"+'<div class="btn-group">'+'<button type="button" class="btn btn-default btn-sm btn-small" title="'+e.image.floatLeft+'" data-event="floatMe" data-value="left" tabindex="-1"><i class="fa fa-align-left icon-align-left"></i></button>'+'<button type="button" class="btn btn-default btn-sm btn-small" title="'+e.image.floatRight+'" data-event="floatMe" data-value="right" tabindex="-1"><i class="fa fa-align-right icon-align-right"></i></button>'+'<button type="button" class="btn btn-default btn-sm btn-small" title="'+e.image.floatNone+'" data-event="floatMe" data-value="none" tabindex="-1"><i class="fa fa-align-justify icon-align-justify"></i></button>'+"</div>"+"</div>"+"</div>"+"</div>"};i='<div class="note-handle">'+'<div class="note-control-selection">'+'<div class="note-control-selection-bg"></div>'+'<div class="note-control-holder note-control-nw"></div>'+'<div class="note-control-holder note-control-ne"></div>'+'<div class="note-control-holder note-control-sw"></div>'+'<div class="note-control-sizing note-control-se"></div>'+'<div class="note-control-selection-info"></div>'+"</div>"+"</div>";var a=function(e){return'<table class="note-shortcut">'+"<thead>"+"<tr><th></th><th>"+e.shortcut.textFormatting+"</th></tr>"+"</thead>"+"<tbody>"+"<tr><td>⌘ + B</td><td>"+e.font.bold+"</td></tr>"+"<tr><td>⌘ + I</td><td>"+e.font.italic+"</td></tr>"+"<tr><td>⌘ + U</td><td>"+e.font.underline+"</td></tr>"+"<tr><td>⌘ + ⇧ + S</td><td>"+e.font.strike+"</td></tr>"+"<tr><td>⌘ + \\</td><td>"+e.font.clear+"</td></tr>"+"</tr>"+"</tbody>"+"</table>"};var l=function(e){return'<table class="note-shortcut">'+"<thead>"+"<tr><th></th><th>"+e.shortcut.action+"</th></tr>"+"</thead>"+"<tbody>"+"<tr><td>⌘ + Z</td><td>"+e.history.undo+"</td></tr>"+"<tr><td>⌘ + ⇧ + Z</td><td>"+e.history.redo+"</td></tr>"+"<tr><td>⌘ + ]</td><td>"+e.paragraph.indent+"</td></tr>"+"<tr><td>⌘ + [</td><td>"+e.paragraph.outdent+"</td></tr>"+"<tr><td>⌘ + K</td><td>"+e.link.insert+"</td></tr>"+"<tr><td>⌘ + ENTER</td><td>"+e.hr.insert+"</td></tr>"+"</tbody>"+"</table>"};var c=function(e){return'<table class="note-shortcut">'+"<thead>"+"<tr><th></th><th>"+e.shortcut.paragraphFormatting+"</th></tr>"+"</thead>"+"<tbody>"+"<tr><td>⌘ + ⇧ + L</td><td>"+e.paragraph.left+"</td></tr>"+"<tr><td>⌘ + ⇧ + E</td><td>"+e.paragraph.center+"</td></tr>"+"<tr><td>⌘ + ⇧ + R</td><td>"+e.paragraph.right+"</td></tr>"+"<tr><td>⌘ + ⇧ + J</td><td>"+e.paragraph.justify+"</td></tr>"+"<tr><td>⌘ + ⇧ + NUM7</td><td>"+e.lists.ordered+"</td></tr>"+"<tr><td>⌘ + ⇧ + NUM8</td><td>"+e.lists.unordered+"</td></tr>"+"</tbody>"+"</table>"};var h=function(e){return'<table class="note-shortcut">'+"<thead>"+"<tr><th></th><th>"+e.shortcut.documentStyle+"</th></tr>"+"</thead>"+"<tbody>"+"<tr><td>⌘ + NUM0</td><td>"+e.style.normal+"</td></tr>"+"<tr><td>⌘ + NUM1</td><td>"+e.style.h1+"</td></tr>"+"<tr><td>⌘ + NUM2</td><td>"+e.style.h2+"</td></tr>"+"<tr><td>⌘ + NUM3</td><td>"+e.style.h3+"</td></tr>"+"<tr><td>⌘ + NUM4</td><td>"+e.style.h4+"</td></tr>"+"<tr><td>⌘ + NUM5</td><td>"+e.style.h5+"</td></tr>"+"<tr><td>⌘ + NUM6</td><td>"+e.style.h6+"</td></tr>"+"</tbody>"+"</table>"};var p=function(e){return'<table class="note-shortcut-layout">'+"<tbody>"+"<tr><td>"+l(e)+"</td><td>"+a(e)+"</td></tr>"+"<tr><td>"+h(e)+"</td><td>"+c(e)+"</td></tr>"+"</tbody>"+"</table>"};var d=function(e){return e.replace(/⌘/g,"Ctrl").replace(/⇧/g,"Shift")};o=function(e){return'<div class="note-dialog">'+'<div class="note-image-dialog modal" aria-hidden="false">'+'<div class="modal-dialog">'+'<div class="modal-content">'+'<div class="modal-header">'+'<button type="button" class="close" aria-hidden="true" tabindex="-1">×</button>'+"<h4>"+e.image.insert+"</h4>"+"</div>"+'<div class="modal-body">'+'<div class="row-fluid">'+"<h5>"+e.image.selectFromFiles+"</h5>"+'<input class="note-image-input" type="file" name="files" accept="image/*" />'+"<h5>"+e.image.url+"</h5>"+'<input class="note-image-url form-control span12" type="text" />'+"</div>"+"</div>"+'<div class="modal-footer">'+'<button href="#" class="btn btn-primary note-image-btn disabled" disabled="disabled">'+e.image.insert+"</button>"+"</div>"+"</div>"+"</div>"+"</div>"+'<div class="note-link-dialog modal" aria-hidden="false">'+'<div class="modal-dialog">'+'<div class="modal-content">'+'<div class="modal-header">'+'<button type="button" class="close" aria-hidden="true" tabindex="-1">×</button>'+"<h4>"+e.link.insert+"</h4>"+"</div>"+'<div class="modal-body">'+'<div class="row-fluid">'+'<div class="form-group">'+"<label>"+e.link.textToDisplay+"</label>"+'<span class="note-link-text form-control input-xlarge uneditable-input" />'+"</div>"+'<div class="form-group">'+"<label>"+e.link.url+"</label>"+'<input class="note-link-url form-control span12" type="text" />'+"</div>"+"</div>"+"</div>"+'<div class="modal-footer">'+'<button href="#" class="btn btn-primary note-link-btn disabled" disabled="disabled">'+e.link.insert+"</button>"+"</div>"+"</div>"+"</div>"+"</div>"+'<div class="note-video-dialog modal" aria-hidden="false">'+'<div class="modal-dialog">'+'<div class="modal-content">'+'<div class="modal-header">'+'<button type="button" class="close" aria-hidden="true" tabindex="-1">×</button>'+"<h4>"+e.video.insert+"</h4>"+"</div>"+'<div class="modal-body">'+'<div class="row-fluid">'+'<div class="form-group">'+"<label>"+e.video.url+'</label>&nbsp;<small class="text-muted">'+e.video.providers+"</small>"+'<input class="note-video-url form-control span12" type="text" />'+"</div>"+"</div>"+"</div>"+'<div class="modal-footer">'+'<button href="#" class="btn btn-primary note-video-btn disabled" disabled="disabled">'+e.video.insert+"</button>"+"</div>"+"</div>"+"</div>"+"</div>"+'<div class="note-help-dialog modal" aria-hidden="false">'+'<div class="modal-dialog">'+'<div class="modal-content">'+'<div class="modal-body">'+'<div class="modal-background">'+'<a class="modal-close pull-right" aria-hidden="true" tabindex="-1">'+e.shortcut.close+"</a>"+'<div class="title">'+e.shortcut.shortcuts+"</div>"+(n.bMac?p(e):d(p(e)))+'<p class="text-center"><a href="//hackerwins.github.io/summernote/" target="_blank">Summernote 0.5.0</a> · <a href="//github.com/HackerWins/summernote" target="_blank">Project</a> · <a href="//github.com/HackerWins/summernote/issues" target="_blank">Issues</a></p>'+"</div>"+"</div>"+"</div>"+"</div>"+"</div>"};u='<div class="note-resizebar"><div class="note-icon-bar"></div><div class="note-icon-bar"></div><div class="note-icon-bar"></div></div>';var v=function(t,r){t.find("button").each(function(t,r){var i=e(r);var s=i.attr(n.bMac?"data-mac-shortcut":"data-shortcut");if(s){i.attr("title",function(e,t){return t+" ("+s+")"})}}).tooltip({container:"body",placement:r||"top"})};var m=[["#000000","#424242","#636363","#9C9C94","#CEC6CE","#EFEFEF","#F7F7F7","#FFFFFF"],["#FF0000","#FF9C00","#FFFF00","#00FF00","#00FFFF","#0000FF","#9C00FF","#FF00FF"],["#F7C6CE","#FFE7CE","#FFEFC6","#D6EFD6","#CEDEE7","#CEE7F7","#D6D6E7","#E7D6DE"],["#E79C9C","#FFC69C","#FFE79C","#B5D6A5","#A5C6CE","#9CC6EF","#B5A5D6","#D6A5BD"],["#E76363","#F7AD6B","#FFD663","#94BD7B","#73A5AD","#6BADDE","#8C7BC6","#C67BA5"],["#CE0000","#E79439","#EFC631","#6BA54A","#4A7B8C","#3984C6","#634AA5","#A54A7B"],["#9C0000","#B56308","#BD9400","#397B21","#104A5A","#085294","#311873","#731842"],["#630000","#7B3900","#846300","#295218","#083139","#003163","#21104A","#4A1031"]];var g=function(t){t.find(".note-color-palette").each(function(){var t=e(this),n=t.attr("data-target-event");var r=[];for(var i=0,s=m.length;i<s;i++){var o=m[i];var u=[];for(var a=0,f=o.length;a<f;a++){var l=o[a];u.push(['<button type="button" class="note-color-btn" style="background-color:',l,';" data-event="',n,'" data-value="',l,'" title="',l,'" data-toggle="button" tabindex="-1"></button>'].join(""))}r.push("<div>"+u.join("")+"</div>")}t.html(r.join(""))})};this.createLayout=function(n,a){var l=a.height,c=a.tabsize,h=a.toolbar,p=e.summernote.lang[a.lang];if(n.next().hasClass("note-editor")){return}var d=e('<div class="note-editor"></div>');d.data("options",a);if(l>0){e('<div class="note-statusbar">'+u+"</div>").prependTo(d)}var m=e('<div class="note-editable" contentEditable="true"></div>').prependTo(d);if(l){m.height(l);m.data("optionHeight",l)}if(c){m.data("tabsize",c)}m.html(s.html(n)||s.emptyPara);m.data("NoteHistory",new f);e('<textarea class="note-codable"></textarea>').prependTo(d);setTimeout(function(){document.execCommand("styleWithCSS",0,true)});var y="";for(var b=0,w=h.length;b<w;b++){var E=h[b];y+='<div class="note-'+E[0]+' btn-group">';for(var S=0,x=E[1].length;S<x;S++){y+=t[E[1][S]](p)}y+="</div>"}y='<div class="note-toolbar btn-toolbar">'+y+"</div>";var T=e(y).prependTo(d);g(T);v(T,"bottom");var N=e(r(p)).prependTo(d);v(N);e(i).prependTo(d);var C=e(o(p)).prependTo(d);C.find("button.close, a.modal-close").click(function(){e(this).closest(".modal").modal("hide")});e('<div class="note-dropzone"><div class="note-dropzone-message"></div></div>').prependTo(d);d.insertAfter(n);n.hide()};var y=this.layoutInfoFromHolder=function(e){var t=e.next();if(!t.hasClass("note-editor")){return}return{editor:t,dropzone:t.find(".note-dropzone"),toolbar:t.find(".note-toolbar"),editable:t.find(".note-editable"),codable:t.find(".note-codable"),statusbar:t.find(".note-statusbar"),popover:t.find(".note-popover"),handle:t.find(".note-handle"),dialog:t.find(".note-dialog")}};this.removeLayout=function(e){var t=y(e);if(!t){return}e.html(t.editable.html());t.editor.remove();e.show()}};var g=new m;var y=new v;e.summernote=e.summernote||{};e.extend(e.summernote,{version:"0.5.0",lang:{"en-US":{font:{bold:"Bold",italic:"Italic",underline:"Underline",strike:"Strike",clear:"Remove Font Style",height:"Line Height",size:"Font Size"},image:{image:"Picture",insert:"Insert Image",resizeFull:"Resize Full",resizeHalf:"Resize Half",resizeQuarter:"Resize Quarter",floatLeft:"Float Left",floatRight:"Float Right",floatNone:"Float None",dragImageHere:"Drag an image here",selectFromFiles:"Select from files",url:"Image URL"},link:{link:"Link",insert:"Insert Link",unlink:"Unlink",edit:"Edit",textToDisplay:"Text to display",url:"To what URL should this link go?"},video:{video:"Video",videoLink:"Video Link",insert:"Insert Video",url:"Video URL?",providers:"(YouTube, Vimeo, Vine, Instagram, or DailyMotion)"},table:{table:"Table"},hr:{insert:"Insert Horizontal Rule"},style:{style:"Style",normal:"Normal",blockquote:"Quote",pre:"Code",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6"},lists:{unordered:"Unordered list",ordered:"Ordered list"},options:{help:"Help",fullscreen:"Full Screen",codeview:"Code View"},paragraph:{paragraph:"Paragraph",outdent:"Outdent",indent:"Indent",left:"Align left",center:"Align center",right:"Align right",justify:"Justify full"},color:{recent:"Recent Color",more:"More Color",background:"BackColor",foreground:"FontColor",transparent:"Transparent",setTransparent:"Set transparent",reset:"Reset",resetToDefault:"Reset to default"},shortcut:{shortcuts:"Keyboard shortcuts",close:"Close",textFormatting:"Text formatting",action:"Action",paragraphFormatting:"Paragraph formatting",documentStyle:"Document Style"},history:{undo:"Undo",redo:"Redo"}}}});e.fn.extend({summernote:function(t){t=e.extend({toolbar:[["style",["style"]],["font",["bold","italic","underline","clear"]],["fontsize",["fontsize"]],["color",["color"]],["para",["ul","ol","paragraph"]],["height",["height"]],["table",["table"]],["insert",["link","picture","video"]],["view",["fullscreen","codeview"]],["help",["help"]]],lang:"en-US"},t);this.each(function(n,r){var i=e(r);g.createLayout(i,t);var o=g.layoutInfoFromHolder(i);y.attach(o,t);if(s.isTextarea(i[0])){i.closest("form").submit(function(){i.html(i.code())})}});if(this.first()&&t.focus){var n=g.layoutInfoFromHolder(this.first());n.editable.focus()}if(this.length>0&&t.oninit){t.oninit()}},code:function(t){if(t===undefined){var r=this.first();if(r.length===0){return}var i=g.layoutInfoFromHolder(r);if(!!(i&&i.editable)){var s=i.editor.hasClass("codeview");if(s&&n.bCodeMirror){i.codable.data("cmEditor").save()}return s?i.codable.val():i.editable.html()}return r.html()}this.each(function(n,r){var i=g.layoutInfoFromHolder(e(r));if(i&&i.editable){i.editable.html(t)}})},destroy:function(){this.each(function(t,n){var r=e(n);var i=g.layoutInfoFromHolder(r);if(!i||!i.editable){return}y.dettach(i);g.removeLayout(r)})},summernoteInner:function(){return{dom:s,list:i,func:r,range:o}}})})
